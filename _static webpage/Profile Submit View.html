<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/bf401d2f01.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style/main.css" />
    <link rel="stylesheet" href="style/update upload form.css" />
    <link rel="shortcut icon" href="sources/SJTU.ico" type="image/x-icon" />
    <title>工导项目修改作品</title>
  </head>

  <body>
    <!-- Header ---------------------------------------------------------------------------------->
    <header class="main-header">
      <div class="main-header-left">
        <img src="sources/SJTU LOGO black.png" alt="LOGO" class="main-logo">
        <form method="post" class="search-form">
          <label for="searchbar"><i class="fas fa-search"></i></label>
          <input name="searchbar" id="searchbar" type="text" class="search-box" placeholder="输入关键字">
        </form>
      </div>

      <div class="main-header-right">
        <a href="#" class="main-square-btn">提交作品</a>
        <div class="horizontal-divider"></div>
        <a href="#" class="main-square-sub">登入</a>
        <!-- change between danger and main -->
        <a href="#" class="main-square-btn main">加入我们</a>
      </div>
    </header>

    <!-- Main Area ------------------------------------------------------------ -->
    <div class="form-container">
      <h3>修改/提交作品</h3>

      <form method="POST" class="main-form" enctype="multipart/form-data">
        <div class="form-group">
          <label for="group-name">组别名字</label>
          <input type="text" name="group-name" id="group-name" placeholder="" />
        </div>
        <div class="form-group">
          <label for="group-description">组别简介</label>
          <input type="text" name="group-description" id="group-description" placeholder="一群卷的厉害的学霸们" />
        </div>
        <div class="form-group">
          <label for="teammates">组员名字（以逗号隔开）</label>
          <input type="text" name="teammates" id="teammates" placeholder="不包含组长名" />
        </div>
        <div class="form-group">
          <label for="project-name">作品名字</label>
          <input type="text" name="project-name" id="project-name" placeholder="" />
        </div>

        <div class="form-group">
          <label>作品图片（至少一张图）</label>
          <div class="form-pictures">

            <div class="form-picture">
              <div class="form-toggle-group">
                <label for="project-img-1" class="file-upload">
                  <input accept="image/*" type="file" name="project-img-1" id="project-img-1" class="form-project-img" onchange="showPreview(this)" data-picname="default">
                  <i class="fa fa-cloud-upload"></i> 上传
                </label>
                <label class="file-remove" onclick="deletePicture(this)">
                  <i class="fas fa-trash-alt"></i> 清空
                </label>
              </div>
              <img src="pictures/project placeholder.png" alt="project-img-1">
            </div>

            <div class="form-picture">
              <label for="project-img-2" class="file-upload">
                <input accept="image/*" type="file" name="project-img-2" id="project-img-2" class="form-project-img" onchange="showPreview(this)">
                <i class="fa fa-cloud-upload"></i> 上传
              </label>
              <img src="pictures/project placeholder.png" alt="project-img-2">
            </div>
            <div class="form-picture">
              <label for="project-img-3" class="file-upload">
                <input accept="image/*" type="file" name="project-img-3" id="project-img-3" class="form-project-img" onchange="showPreview(this)">
                <i class="fa fa-cloud-upload"></i> 上传
              </label>
              <img src="pictures/project placeholder.png" alt="project-img-3">
            </div>
            <div class="form-picture">
              <label for="project-img-4" class="file-upload">
                <input accept="image/*" type="file" name="project-img-4" id="project-img-4" class="form-project-img" onchange="showPreview(this)">
                <i class="fa fa-cloud-upload"></i> 上传
              </label>
              <img src="pictures/project placeholder.png" alt="project-img-4">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="project-description">作品简介</label>
          <textarea name="project-description" id="project-description" cols="30" rows="10" placeholder="让小伙伴们知道你的作品多牛"></textarea>
        </div>

        <div class="form-group">
          <input type="submit" value="提交" class="form-submit-btn" />
        </div>
      </form>
    </div>

    <!-- footer -------------------------------------------------------------------------------------------- -->
    <footer>
      <div class="footer-container">
        <div class="footer-info">
          <div class="footer-info-left">
            <ul class="footer-list">
              <li class="footer-list-item"><a href="#"> 关于我们</a></li>
              <li class="footer-list-item"><a href="#"> 协助开发</a></li>
              <li class="footer-list-item"><a href="#"> 感谢</a></li>
            </ul>
          </div>

          <div class="footer-info-right">
            <!-- Copyright reserved -->
            <div class="copyright">
              © 保留所有权利，由
              <a href="#" target="_blank"> 上海交通大学学生</a> 制作
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // For preview when select a picture to upload
      function showPreview(event) {
        const [file] = event.files
        if (file) {  // if file exists
          let url = URL.createObjectURL(file);
          console.log(url);
          console.log(event);
          event.dataset.picname = file.name;
          event.parentNode.parentNode.parentNode.children[1].src = url;
        }
      }

      function deletePicture(event) {
        let input = event.parentNode.children[0].children[0];
        console.log(event);
        let picture = event.parentNode.parentNode.children[1];
        console.log(picture);

        input.dataset.picname = "default";
        picture.src = "pictures/project placeholder.png";
      }

    </script>
  </body>
</html>
